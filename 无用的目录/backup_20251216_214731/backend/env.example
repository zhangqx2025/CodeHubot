# ==========================================
# CodeHubot 后端服务环境变量配置
# 使用前请复制此文件为 .env 并修改配置
# ==========================================

# ==================== 数据库配置 ====================
# 数据库主机地址
DB_HOST=localhost

# 数据库端口（默认 3306）
DB_PORT=3306

# 数据库用户名
DB_USER=aiot_user

# 数据库密码
DB_PASSWORD=your_secure_password

# 数据库名称
DB_NAME=aiot_admin

# ==================== Redis配置 ====================
# Redis连接URL（可选，用于缓存）
REDIS_URL=redis://localhost:6379

# ==================== 服务器配置 ====================
# 服务器基础URL，用于生成固件下载链接等
SERVER_BASE_URL=http://localhost:8000

# 固件下载基础URL（可选，默认使用SERVER_BASE_URL）
# FIRMWARE_BASE_URL=http://your-server-ip:8000

# ==================== JWT配置 ====================
# JWT密钥（必须，至少32个字符）
# 生成方法：python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-very-long-secret-key-at-least-32-characters-long

# JWT算法
ALGORITHM=HS256

# Access Token有效期（分钟）
# 建议：开发环境 120-240分钟，生产环境 30-60分钟
ACCESS_TOKEN_EXPIRE_MINUTES=120

# Refresh Token有效期（分钟）
# 建议：开发环境 7天(10080分钟)，生产环境 1-3天
REFRESH_TOKEN_EXPIRE_MINUTES=10080

# ==================== MQTT配置 ====================
# MQTT服务器地址（必须配置）
MQTT_BROKER_HOST=localhost

# MQTT服务器端口
MQTT_BROKER_PORT=1883

# MQTT用户名（如果MQTT允许匿名访问，可以留空）
MQTT_USERNAME=

# MQTT密码（如果MQTT允许匿名访问，可以留空）
MQTT_PASSWORD=

# 如果MQTT需要认证，填写以下信息：
# MQTT_USERNAME=mqtt_user
# MQTT_PASSWORD=your_mqtt_password

# ==================== 邮件服务配置 ====================
# 邮件服务配置（可选）
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_FROM=your-email@gmail.com
MAIL_PORT=587
MAIL_SERVER=smtp.gmail.com
MAIL_TLS=true
MAIL_SSL=false
USE_CREDENTIALS=true
VALIDATE_CERTS=true

# ==================== 知识库向量化配置 ====================
# 阿里云通义千问 Embedding API 密钥（必需，用于文档向量化）
# 获取方式：https://dashscope.console.aliyun.com/apiKey
DASHSCOPE_API_KEY=sk-your-dashscope-api-key-here

# 或者使用别名（两者配置一个即可）
# QWEN_API_KEY=sk-your-qwen-api-key-here

# ==================== 环境配置 ====================
# 运行环境：development, production, testing
ENVIRONMENT=development

# 日志级别：DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ==================== 管理员账号配置（可选）====================
# 首次部署时自动创建管理员账号
# 如果设置了 ADMIN_PASSWORD，系统启动时会自动创建管理员账号
# 如果账号已存在，则不会重复创建

# 管理员用户名（默认：admin）
ADMIN_USERNAME=admin

# 管理员密码（必须设置才会创建管理员账号）
# 建议使用强密码，至少8位，包含字母和数字
ADMIN_PASSWORD=

# 管理员邮箱（可选，默认：{ADMIN_USERNAME}@aiot.com）
# ADMIN_EMAIL=admin@example.com

# ==================== 默认大模型配置（可选）====================
# 系统启动时会自动创建默认的大模型配置
# 如果未配置，智能体将无法使用（除非手动创建大模型配置）

# 通义千问API密钥（如果已设置DASHSCOPE_API_KEY，可以不设置）
# QWEN_API_KEY=sk-your-qwen-api-key-here

# 通义千问API地址（默认：https://dashscope.aliyuncs.com/compatible-mode/v1）
# QWEN_API_BASE=https://dashscope.aliyuncs.com/compatible-mode/v1

# 模型名称（默认：qwen-turbo）
# QWEN_MODEL_NAME=qwen-turbo

# 显示名称（默认：通义千问-Turbo）
# QWEN_DISPLAY_NAME=通义千问-Turbo

# 最大token数（默认：8192）
# QWEN_MAX_TOKENS=8192

# 温度参数（默认：0.20）
# QWEN_TEMPERATURE=0.20

# Top-p参数（默认：0.90）
# QWEN_TOP_P=0.90

# ==================== 默认产品配置（可选）====================
# 系统启动时会自动创建默认的产品配置（ESP32-S3开发板）
# 如果未配置，将使用默认值

# 产品编码（默认：ESP-32-S3-01）
# DEFAULT_PRODUCT_CODE=ESP-32-S3-01

# 产品名称（默认：标准开发板）
# DEFAULT_PRODUCT_NAME=标准开发板

# 传感器配置（JSON格式，可选，不设置则使用默认配置）
# DEFAULT_PRODUCT_SENSORS={"DHT11_humidity": {"name": "DHT11湿度", "type": "DHT11", "enabled": true, "data_field": "humidity"}, "DHT11_temperature": {"name": "DHT11温度", "type": "DHT11", "enabled": true, "data_field": "temperature"}}

# 控制端口配置（JSON格式，可选，不设置则使用默认配置）
# DEFAULT_PRODUCT_CONTROLS={"led_1": {"name": "LED1", "type": "LED", "enabled": true, "device_id": 1}, "led_2": {"name": "LED2", "type": "LED", "enabled": true, "device_id": 2}, "led_3": {"name": "LED3", "type": "LED", "enabled": true, "device_id": 3}, "led_4": {"name": "LED4", "type": "LED", "enabled": true, "device_id": 4}}

# ==================== 高级配置（可选）====================
# 以下配置有默认值，通常不需要修改

# 交互日志配置
# LOG_BATCH_SIZE=1000
# LOG_FLUSH_INTERVAL=5.0
# LOG_RETENTION_DAYS=90
# LOG_COMPRESSION_ENABLED=true
# LOG_ARCHIVE_ENABLED=true

# 缓存配置
# CACHE_RECENT_LOGS_TTL=300
# CACHE_STATS_TTL=3600
# CACHE_DEVICE_STATUS_TTL=60

# 设备离线超时配置（分钟）
# DEVICE_OFFLINE_TIMEOUT_MINUTES=5

# 性能配置
# MAX_CONCURRENT_WRITES=10
# QUERY_TIMEOUT=30
# CONNECTION_POOL_SIZE=20
