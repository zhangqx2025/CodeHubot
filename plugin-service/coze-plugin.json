{
  "openapi": "3.0.0",
  "info": {
    "title": "æ™ºèƒ½å®¶å±…IoTè®¾å¤‡æ§åˆ¶æ’ä»¶",
    "description": "è¿™æ˜¯ä¸€ä¸ªæ™ºèƒ½å®¶å±…è®¾å¤‡æ§åˆ¶æ’ä»¶ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ï¼‰å’Œæ§åˆ¶æ™ºèƒ½è®¾å¤‡ï¼ˆLEDç¯ã€ç»§ç”µå™¨ã€èˆµæœºã€PWMç­‰ï¼‰ã€‚\n\n**æ ¸å¿ƒåŠŸèƒ½**ï¼š\n- ğŸŒ¡ï¸ å®æ—¶ä¼ æ„Ÿå™¨æ•°æ®æŸ¥è¯¢ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ã€DS18B20ï¼‰\n- ğŸ’¡ æ™ºèƒ½è®¾å¤‡æ§åˆ¶ï¼ˆLEDã€ç»§ç”µå™¨ã€èˆµæœºã€PWMï¼‰\n- ğŸ­ é¢„è®¾æŒ‡ä»¤æ‰§è¡Œï¼ˆé—ªçƒã€æµæ°´ç¯ã€æ‘†åŠ¨ã€å‘¼å¸ç¯ç­‰8ç§é¢„è®¾ï¼‰\n- ğŸ·ï¸ è®¾å¤‡åˆ«åæ”¯æŒï¼ˆä½¿ç”¨\"å®¢å…ç¯\"ç­‰å‹å¥½åç§°ï¼‰\n\n**ä½¿ç”¨æ–¹å¼**ï¼š\n- æ— éœ€JWTè®¤è¯ï¼Œåªéœ€æä¾›è®¾å¤‡UUID\n- å®æ—¶ç¡¬ä»¶æ§åˆ¶ï¼Œå‘½ä»¤ç«‹å³æ‰§è¡Œ\n- æ”¯æŒä¸­æ–‡è‡ªç„¶è¯­è¨€è¯†åˆ«\n\n**ç‰ˆæœ¬æ›´æ–°**ï¼š\nv1.1.0 (2025-11-11)\n- âœ… ä¿®å¤æ§åˆ¶å‘½ä»¤æ ¼å¼ï¼Œç¡®ä¿ç¡¬ä»¶è®¾å¤‡æ­£ç¡®å“åº”\n- âœ… å¢å¼ºæè¿°ä¿¡æ¯ï¼Œæ˜ç¡®å®æ—¶ç¡¬ä»¶æ§åˆ¶ç‰¹æ€§\n- âœ… æ·»åŠ æ›´å¤šä½¿ç”¨åœºæ™¯å’Œæ•…éšœæ’æŸ¥æç¤º",
    "version": "1.1.0"
  },
  "servers": [
    {
      "url": "https://plugin.aiot.hello1023.com",
      "description": "ç”Ÿäº§æœåŠ¡å™¨ï¼ˆè¯·æ›¿æ¢ä¸ºå®é™…çš„å…¬ç½‘åœ°å€ï¼‰"
    }
  ],
  "paths": {
    "/plugin/device-aliases": {
      "get": {
        "summary": "è·å–è®¾å¤‡çš„åˆ«åé…ç½®",
        "description": "**é‡è¦ï¼šä¼˜å…ˆè°ƒç”¨æ­¤æ¥å£ï¼**\n\nå½“ç”¨æˆ·ä½¿ç”¨å‹å¥½çš„åˆ«åï¼ˆå¦‚\"å®¢å…ç¯\"ã€\"å§å®¤ç¯\"ã€\"é£æ‰‡\"ç­‰ï¼‰æ¥æ§åˆ¶è®¾å¤‡æ—¶ï¼Œå¿…é¡»å…ˆè°ƒç”¨æ­¤æ¥å£è·å–åˆ«åé…ç½®ï¼Œç„¶åæ ¹æ®åˆ«åæ‰¾åˆ°å¯¹åº”çš„å®é™…ç«¯å£ä¿¡æ¯ã€‚\n\n**ä½¿ç”¨æµç¨‹ï¼ˆAIå¿…é¡»éµå¾ªï¼‰**ï¼š\n1. ç”¨æˆ·è¯´ï¼š\"æ‰“å¼€å®¢å…ç¯\"\n2. AIè¯†åˆ«åˆ°\"å®¢å…ç¯\"ä¸æ˜¯æ ‡å‡†çš„LED1/LED2\n3. **é¦–å…ˆè°ƒç”¨æ­¤æ¥å£**è·å–è®¾å¤‡çš„åˆ«åé…ç½®\n4. åœ¨è¿”å›çš„control_aliasesä¸­æŸ¥æ‰¾\"å®¢å…ç¯\"\n5. æ‰¾åˆ°å¯¹åº”ï¼š{\"port_type\": \"led\", \"port_id\": 1}\n6. ç„¶åè°ƒç”¨/plugin/controlæ¥å£ï¼Œä½¿ç”¨æ‰¾åˆ°çš„å‚æ•°\n\n**åˆ«åç¤ºä¾‹**ï¼š\n- \"å®¢å…ç¯\" â†’ LED1\n- \"å§å®¤ç¯\" â†’ LED2\n- \"é£æ‰‡\" â†’ ç»§ç”µå™¨1\n- \"åŠ æ¹¿å™¨\" â†’ ç»§ç”µå™¨2\n- \"çª—å¸˜\" â†’ èˆµæœº1\n- \"å¿«é€Ÿé—ªçƒ\" â†’ led_blinké¢„è®¾\n- \"å½©è™¹ç¯\" â†’ led_waveé¢„è®¾\n\n**å“åº”æ•°æ®è¯´æ˜**ï¼š\n- control_aliases: ç«¯å£åˆ«åå­—å…¸ï¼Œkeyæ˜¯åˆ«åï¼ŒvalueåŒ…å«port_typeå’Œport_id\n- preset_aliases: é¢„è®¾åˆ«åå­—å…¸ï¼Œkeyæ˜¯åˆ«åï¼ŒvalueåŒ…å«preset_nameå’Œparameters",
        "operationId": "getDeviceAliases",
        "tags": ["è®¾å¤‡é…ç½®"],
        "parameters": [
          {
            "name": "uuid",
            "in": "query",
            "description": "è®¾å¤‡UUIDã€‚ğŸ§ª æµ‹è¯•æ—¶ä½¿ç”¨ï¼štestï¼ˆè°ƒè¯•æ¨¡å¼ï¼Œè¿”å›æ¨¡æ‹Ÿæ•°æ®ï¼‰",
            "required": true,
            "schema": {
              "type": "string",
              "default": "test",
              "example": "test"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸè·å–åˆ«åé…ç½®",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "integer",
                      "example": 200
                    },
                    "msg": {
                      "type": "string",
                      "example": "è·å–è®¾å¤‡åˆ«åé…ç½®æˆåŠŸ"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "device_uuid": {
                          "type": "string"
                        },
                        "control_aliases": {
                          "type": "object",
                          "description": "ç«¯å£åˆ«åé…ç½®ã€‚keyæ˜¯åˆ«åï¼ˆå¦‚'å®¢å…ç¯'ï¼‰ï¼ŒvalueåŒ…å«port_typeå’Œport_id",
                          "additionalProperties": {
                            "type": "object",
                            "properties": {
                              "port_type": {"type": "string", "example": "led"},
                              "port_id": {"type": "integer", "example": 1},
                              "description": {"type": "string"},
                              "enabled": {"type": "boolean"}
                            }
                          }
                        },
                        "preset_aliases": {
                          "type": "object",
                          "description": "é¢„è®¾åˆ«åé…ç½®ã€‚keyæ˜¯åˆ«åï¼ˆå¦‚'å¿«é€Ÿé—ªçƒ'ï¼‰ï¼ŒvalueåŒ…å«preset_nameå’Œparameters",
                          "additionalProperties": {
                            "type": "object",
                            "properties": {
                              "preset_name": {"type": "string"},
                              "device_type": {"type": "string"},
                              "device_id": {"type": "integer"},
                              "preset_type": {"type": "string"},
                              "parameters": {"type": "object"},
                              "description": {"type": "string"}
                            }
                          }
                        },
                        "total_control_aliases": {
                          "type": "integer",
                          "description": "ç«¯å£åˆ«åæ€»æ•°"
                        },
                        "total_preset_aliases": {
                          "type": "integer",
                          "description": "é¢„è®¾åˆ«åæ€»æ•°"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "code": 200,
                  "msg": "è·å–è®¾å¤‡åˆ«åé…ç½®æˆåŠŸ",
                  "data": {
                    "device_uuid": "cbeb5cb6-8cb4-44d6-86ed-43b357e0adf5",
                    "control_aliases": {
                      "å®¢å…ç¯": {
                        "port_type": "led",
                        "port_id": 1,
                        "description": "å®¢å…ä¸»ç¯",
                        "enabled": true
                      },
                      "å§å®¤ç¯": {
                        "port_type": "led",
                        "port_id": 2,
                        "description": "å§å®¤ç¯",
                        "enabled": true
                      },
                      "é£æ‰‡": {
                        "port_type": "relay",
                        "port_id": 1,
                        "description": "å®¢å…é£æ‰‡",
                        "enabled": true
                      }
                    },
                    "preset_aliases": {
                      "å¿«é€Ÿé—ªçƒ": {
                        "preset_name": "led_blink",
                        "device_type": "led",
                        "device_id": 1,
                        "preset_type": "blink",
                        "parameters": {"count": 5, "on_time": 200, "off_time": 200},
                        "description": "LEDå¿«é€Ÿé—ªçƒ5æ¬¡"
                      }
                    },
                    "total_control_aliases": 3,
                    "total_preset_aliases": 1
                  }
                }
              }
            }
          }
        }
      }
    },
    "/plugin/sensor-data": {
      "get": {
        "summary": "æŸ¥è¯¢ä¼ æ„Ÿå™¨å®æ—¶æ•°æ®",
        "description": "å½“ç”¨æˆ·è¯¢é—®æ¸©åº¦ã€æ¹¿åº¦ç­‰ä¼ æ„Ÿå™¨æ•°æ®æ—¶ï¼Œä½¿ç”¨æ­¤æ¥å£è·å–å®æ—¶æ•°æ®ã€‚æ”¯æŒæŸ¥è¯¢DHT11æ¸©åº¦ä¼ æ„Ÿå™¨ã€DHT11æ¹¿åº¦ä¼ æ„Ÿå™¨å’ŒDS18B20æ¸©åº¦ä¼ æ„Ÿå™¨ã€‚\n\nä½¿ç”¨åœºæ™¯ä¸¾ä¾‹ï¼š\n- ç”¨æˆ·é—®ï¼š\"ç°åœ¨æ¸©åº¦å¤šå°‘åº¦ï¼Ÿ\" â†’ è°ƒç”¨æ­¤æ¥å£ï¼Œsensorå‚æ•°å¡«\"æ¸©åº¦\"\n- ç”¨æˆ·é—®ï¼š\"æ¹¿åº¦æ˜¯å¤šå°‘ï¼Ÿ\" â†’ è°ƒç”¨æ­¤æ¥å£ï¼Œsensorå‚æ•°å¡«\"æ¹¿åº¦\"\n- ç”¨æˆ·é—®ï¼š\"DS18B20æ˜¾ç¤ºå¤šå°‘åº¦ï¼Ÿ\" â†’ è°ƒç”¨æ­¤æ¥å£ï¼Œsensorå‚æ•°å¡«\"DS18B20\"",
        "operationId": "getSensorData",
        "tags": ["ä¼ æ„Ÿå™¨æŸ¥è¯¢"],
        "parameters": [
          {
            "name": "uuid",
            "in": "query",
            "description": "è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ç¬¦UUIDã€‚ğŸ§ª æµ‹è¯•æ—¶ä½¿ç”¨ï¼štestï¼ˆè°ƒè¯•æ¨¡å¼ï¼Œè¿”å›æ¨¡æ‹Ÿæ•°æ®ï¼‰",
            "required": true,
            "schema": {
              "type": "string",
              "default": "test",
              "example": "test"
            }
          },
          {
            "name": "sensor",
            "in": "query",
            "description": "ä¼ æ„Ÿå™¨åç§°ã€‚è¯·æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é€‰æ‹©å¯¹åº”çš„ä¼ æ„Ÿå™¨ï¼š\n- å½“ç”¨æˆ·é—®æ¸©åº¦ã€å¤šå°‘åº¦ã€çƒ­ä¸çƒ­æ—¶ï¼Œå¡«å†™\"æ¸©åº¦\"\n- å½“ç”¨æˆ·é—®æ¹¿åº¦ã€æ½®æ¹¿ã€å¹²ç‡¥æ—¶ï¼Œå¡«å†™\"æ¹¿åº¦\"\n- å½“ç”¨æˆ·é—®DS18B20æˆ–æŒ‡å®šDS18B20ä¼ æ„Ÿå™¨æ—¶ï¼Œå¡«å†™\"DS18B20\"",
            "required": true,
            "schema": {
              "type": "string",
              "enum": ["æ¸©åº¦", "æ¹¿åº¦", "DS18B20"],
              "example": "æ¸©åº¦"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸè·å–ä¼ æ„Ÿå™¨æ•°æ®ã€‚å“åº”ä¸­data.valueæ˜¯ä¼ æ„Ÿå™¨çš„æ•°å€¼ï¼Œdata.unitæ˜¯å•ä½ã€‚",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "integer",
                      "description": "çŠ¶æ€ç ï¼Œ200è¡¨ç¤ºæˆåŠŸ",
                      "example": 200
                    },
                    "msg": {
                      "type": "string",
                      "description": "å“åº”æ¶ˆæ¯",
                      "example": "è·å–ä¼ æ„Ÿå™¨æ•°æ®æˆåŠŸ"
                    },
                    "data": {
                      "type": "object",
                      "description": "ä¼ æ„Ÿå™¨æ•°æ®",
                      "properties": {
                        "device_uuid": {
                          "type": "string",
                          "description": "è®¾å¤‡UUID",
                          "example": "df13f23c-71c9-46ab-8eb1-715f3127fce2"
                        },
                        "sensor_name": {
                          "type": "string",
                          "description": "ä¼ æ„Ÿå™¨å®Œæ•´åç§°",
                          "example": "DHT11æ¸©åº¦"
                        },
                        "value": {
                          "type": "number",
                          "description": "ä¼ æ„Ÿå™¨æ•°å€¼ï¼ˆè¿™æ˜¯æœ€é‡è¦çš„æ•°æ®ï¼Œå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªå€¼ï¼‰",
                          "example": 24.5
                        },
                        "unit": {
                          "type": "string",
                          "description": "æ•°å€¼å•ä½",
                          "example": "Â°C"
                        },
                        "timestamp": {
                          "type": "string",
                          "description": "æ•°æ®é‡‡é›†æ—¶é—´",
                          "example": "2025-11-11T08:30:00Z"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "code": 200,
                  "msg": "è·å–ä¼ æ„Ÿå™¨æ•°æ®æˆåŠŸ",
                  "data": {
                    "device_uuid": "df13f23c-71c9-46ab-8eb1-715f3127fce2",
                    "sensor_name": "DHT11æ¸©åº¦",
                    "value": 24.5,
                    "unit": "Â°C",
                    "timestamp": "2025-11-11T08:30:00Z"
                  }
                }
              }
            }
          },
          "404": {
            "description": "è®¾å¤‡ä¸å­˜åœ¨æˆ–ä¼ æ„Ÿå™¨æœªæ‰¾åˆ°",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "detail": {
                      "type": "string",
                      "example": "è®¾å¤‡ä¸å­˜åœ¨æˆ–æœªæ‰¾åˆ°ä¼ æ„Ÿå™¨æ•°æ®"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/plugin/control": {
      "post": {
        "summary": "æ§åˆ¶æ™ºèƒ½è®¾å¤‡",
        "description": "**å®æ—¶ç¡¬ä»¶æ§åˆ¶æ¥å£**ï¼šæ­¤æ¥å£ä¼šç«‹å³æ“ä½œçœŸå®çš„ç‰©ç†è®¾å¤‡ï¼\n\nâ—â—â—**é‡è¦æç¤ºï¼šå‚æ•°ç±»å‹å¿…é¡»æ­£ç¡®**â—â—â—\n- port_type å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼š\"led\"ã€\"relay\"ã€\"servo\"ã€\"pwm\"ï¼ˆä¸æ˜¯æ•°å­—1ã€2ã€3ã€4ï¼ï¼‰\n- action å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼š\"on\"ã€\"off\"ã€\"set\"ï¼ˆä¸æ˜¯æ•°å­—1ã€0ï¼ï¼‰\n- port_id å¿…é¡»æ˜¯æ•´æ•°ï¼š1ã€2ã€3ã€4ï¼ˆè¿™ä¸ªæ‰æ˜¯æ•°å­—ï¼ï¼‰\n\n**æ­£ç¡®ç¤ºä¾‹**ï¼š\n```json\n{\n  \"device_uuid\": \"test\",\n  \"port_type\": \"led\",    // âœ… å­—ç¬¦ä¸²\n  \"port_id\": 1,           // âœ… æ•°å­—\n  \"action\": \"on\"          // âœ… å­—ç¬¦ä¸²\n}\n```\n\n**é”™è¯¯ç¤ºä¾‹ï¼ˆä¸è¦è¿™æ ·ï¼‰**ï¼š\n```json\n{\n  \"port_type\": \"1\",      // âŒ é”™è¯¯ï¼åº”è¯¥æ˜¯\"led\"\n  \"action\": \"1\"           // âŒ é”™è¯¯ï¼åº”è¯¥æ˜¯\"on\"\n}\n```\n\n**ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹**ï¼š\n- ç”¨æˆ·è¯´ï¼š\"æ‰“å¼€LED1\" â†’ port_type=\"led\", port_id=1, action=\"on\"\n- ç”¨æˆ·è¯´ï¼š\"å…³é—­ç¬¬2ä¸ªç¯\" â†’ port_type=\"led\", port_id=2, action=\"off\"\n- ç”¨æˆ·è¯´ï¼š\"æŠŠèˆµæœºè½¬åˆ°90åº¦\" â†’ port_type=\"servo\", port_id=1, action=\"set\", value=90\n- ç”¨æˆ·è¯´ï¼š\"æ‰“å¼€ç»§ç”µå™¨\" â†’ port_type=\"relay\", port_id=1, action=\"on\"\n\n**å‚æ•°å¡«å†™è§„åˆ™**ï¼š\n1. port_typeè¯†åˆ«ï¼šç¯/LEDâ†’\"led\"ï¼Œç»§ç”µå™¨/å¼€å…³â†’\"relay\"ï¼Œèˆµæœº/ä¼ºæœâ†’\"servo\"ï¼ŒPWMâ†’\"pwm\"\n2. port_idè¯†åˆ«ï¼šLEDæœ‰1-4ä¸ªï¼Œç»§ç”µå™¨æœ‰1-2ä¸ªï¼Œèˆµæœºåªæœ‰1ä¸ª(å¡«1)ï¼ŒPWMåªæœ‰é€šé“2(å¡«2)\n3. actionè¯†åˆ«ï¼šæ‰“å¼€/å¼€å¯/ç‚¹äº®â†’\"on\"ï¼Œå…³é—­/å…³æ‰/ç†„ç­â†’\"off\"ï¼Œè®¾ç½®/è½¬åˆ°â†’\"set\"\n4. valueåªåœ¨action=\"set\"æ—¶éœ€è¦ï¼Œèˆµæœºå¡«è§’åº¦(0-180)ï¼ŒPWMå¡«å ç©ºæ¯”(0-100)",
        "operationId": "controlDevice",
        "tags": ["è®¾å¤‡æ§åˆ¶"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["device_uuid", "port_type", "port_id", "action"],
                "properties": {
                  "device_uuid": {
                    "type": "string",
                    "description": "è®¾å¤‡UUIDï¼ˆå”¯ä¸€æ ‡è¯†ç¬¦ï¼‰ã€‚ğŸ§ª æµ‹è¯•æ—¶ä½¿ç”¨ï¼štestï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰",
                    "default": "test",
                    "example": "test"
                  },
                  "port_type": {
                    "type": "string",
                    "description": "â—å¿…é¡»å¡«å­—ç¬¦ä¸²ç±»å‹â—ç«¯å£ç±»å‹ã€‚æ ¹æ®ç”¨æˆ·çš„æ„å›¾é€‰æ‹©ï¼š\n- \"led\": ç”¨æˆ·è¯´ç¯ã€LEDã€ç…§æ˜\n- \"relay\": ç”¨æˆ·è¯´ç»§ç”µå™¨ã€å¼€å…³ã€ç”µæº\n- \"servo\": ç”¨æˆ·è¯´èˆµæœºã€ä¼ºæœã€è§’åº¦ã€æ—‹è½¬\n- \"pwm\": ç”¨æˆ·è¯´PWMã€å ç©ºæ¯”\n\nâš ï¸æ³¨æ„ï¼šå¿…é¡»å¡«å†™è‹±æ–‡å­—ç¬¦ä¸²ï¼Œä¸æ˜¯æ•°å­—ï¼ä¾‹å¦‚\"led\"è€Œä¸æ˜¯1",
                    "enum": ["led", "relay", "servo", "pwm"],
                    "example": "led"
                  },
                  "port_id": {
                    "type": "integer",
                    "description": "ç«¯å£ç¼–å·ã€‚LEDæ”¯æŒ1-4ï¼Œç»§ç”µå™¨æ”¯æŒ1-2ï¼Œèˆµæœºå›ºå®šä¸º1ï¼ŒPWMå›ºå®šä¸º2ã€‚\nå¦‚æœç”¨æˆ·è¯´\"ç¬¬ä¸€ä¸ªLED\"åˆ™å¡«1ï¼Œ\"ç¬¬äºŒä¸ªç»§ç”µå™¨\"åˆ™å¡«2ã€‚",
                    "minimum": 1,
                    "maximum": 4,
                    "example": 1
                  },
                  "action": {
                    "type": "string",
                    "description": "â—å¿…é¡»å¡«å­—ç¬¦ä¸²ç±»å‹â—æ§åˆ¶åŠ¨ä½œã€‚æ ¹æ®ç”¨æˆ·æ„å›¾é€‰æ‹©ï¼š\n- \"on\"ï¼ˆæ¨èï¼‰æˆ–\"å¼€å¯\"ã€\"æ‰“å¼€\"ã€\"å¯åŠ¨\": ç”¨æˆ·è¯´æ‰“å¼€ã€å¼€å¯ã€ç‚¹äº®ã€æ¥é€š\n- \"off\"ï¼ˆæ¨èï¼‰æˆ–\"å…³é—­\"ã€\"å…³æ‰\"ã€\"åœæ­¢\": ç”¨æˆ·è¯´å…³é—­ã€å…³æ‰ã€ç†„ç­ã€æ–­å¼€\n- \"set\"ï¼ˆæ¨èï¼‰æˆ–\"è®¾ç½®\"ã€\"è°ƒæ•´\": ç”¨æˆ·è¯´è®¾ç½®ã€è°ƒåˆ°ã€è½¬åˆ°ï¼ˆéœ€è¦é…åˆvalueå‚æ•°ï¼‰\n\nâš ï¸æ³¨æ„ï¼š\n1. å»ºè®®ä½¿ç”¨è‹±æ–‡å€¼ï¼ˆ\"on\"/\"off\"/\"set\"ï¼‰\n2. ä¹Ÿæ”¯æŒä¸­æ–‡å€¼ï¼ˆ\"å¼€å¯\"/\"å…³é—­\"/\"è®¾ç½®\"ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è½¬æ¢\n3. ä¸æ˜¯æ•°å­—ï¼ä¾‹å¦‚\"on\"è€Œä¸æ˜¯1",
                    "enum": ["on", "off", "set", "å¼€å¯", "å…³é—­", "è®¾ç½®"],
                    "example": "on"
                  },
                  "value": {
                    "type": "integer",
                    "description": "è®¾ç½®å€¼ï¼ˆä»…å½“action=setæ—¶éœ€è¦ï¼‰ã€‚\n- èˆµæœºæ§åˆ¶ï¼šå¡«å†™è§’åº¦å€¼0-180åº¦\n- PWMæ§åˆ¶ï¼šå¡«å†™å ç©ºæ¯”0-100%\nä¾‹å¦‚ï¼šç”¨æˆ·è¯´\"èˆµæœºè½¬åˆ°90åº¦\"ï¼Œåˆ™value=90",
                    "minimum": 0,
                    "maximum": 180,
                    "example": 90
                  }
                }
              },
              "examples": {
                "æ‰“å¼€LED1": {
                  "summary": "æ‰“å¼€LED1ï¼ˆæ³¨æ„ï¼šport_typeæ˜¯å­—ç¬¦ä¸²\"led\"ï¼Œactionæ˜¯å­—ç¬¦ä¸²\"on\"ï¼‰",
                  "value": {
                    "device_uuid": "test",
                    "port_type": "led",
                    "port_id": 1,
                    "action": "on"
                  }
                },
                "å…³é—­LED2": {
                  "summary": "å…³é—­LED2ï¼ˆæ³¨æ„ï¼šport_typeæ˜¯å­—ç¬¦ä¸²\"led\"ï¼Œactionæ˜¯å­—ç¬¦ä¸²\"off\"ï¼‰",
                  "value": {
                    "device_uuid": "test",
                    "port_type": "led",
                    "port_id": 2,
                    "action": "off"
                  }
                },
                "æ‰“å¼€ç»§ç”µå™¨1": {
                  "summary": "æ‰“å¼€ç»§ç”µå™¨1ï¼ˆæ³¨æ„ï¼šport_typeæ˜¯å­—ç¬¦ä¸²\"relay\"ï¼Œä¸æ˜¯æ•°å­—1ï¼‰",
                  "value": {
                    "device_uuid": "test",
                    "port_type": "relay",
                    "port_id": 1,
                    "action": "on"
                  }
                },
                "è®¾ç½®èˆµæœºè§’åº¦ä¸º90åº¦": {
                  "summary": "è®¾ç½®èˆµæœºè§’åº¦ä¸º90åº¦ï¼ˆæ³¨æ„ï¼šport_typeæ˜¯å­—ç¬¦ä¸²\"servo\"ï¼Œactionæ˜¯å­—ç¬¦ä¸²\"set\"ï¼‰",
                  "value": {
                    "device_uuid": "test",
                    "port_type": "servo",
                    "port_id": 1,
                    "action": "set",
                    "value": 90
                  }
                },
                "è®¾ç½®PWMå ç©ºæ¯”ä¸º50": {
                  "summary": "è®¾ç½®PWMå ç©ºæ¯”ä¸º50%ï¼ˆæ³¨æ„ï¼šport_typeæ˜¯å­—ç¬¦ä¸²\"pwm\"ï¼‰",
                  "value": {
                    "device_uuid": "test",
                    "port_type": "pwm",
                    "port_id": 2,
                    "action": "set",
                    "value": 50
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "æ§åˆ¶å‘½ä»¤å‘é€æˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "integer",
                      "example": 200
                    },
                    "msg": {
                      "type": "string",
                      "example": "æ§åˆ¶å‘½ä»¤å‘é€æˆåŠŸ"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "device_uuid": {"type": "string"},
                        "port_type": {"type": "string"},
                        "port_id": {"type": "integer"},
                        "action": {"type": "string"},
                        "value": {"type": "integer", "nullable": true},
                        "result": {"type": "string", "example": "success"}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/plugin/preset": {
      "post": {
        "summary": "æ‰§è¡Œé¢„è®¾æ§åˆ¶æŒ‡ä»¤",
        "description": "**å¤æ‚åŠ¨ä½œåºåˆ—æ§åˆ¶æ¥å£**ï¼šæ‰§è¡Œé¢„å…ˆç¼–ç¨‹çš„å¤æ‚æ§åˆ¶åºåˆ—ï¼Œç¡¬ä»¶è®¾å¤‡ä¼šæŒ‰ç…§é¢„è®¾çš„åŠ¨ä½œæ¨¡å¼æ‰§è¡Œï¼\n\nå½“ç”¨æˆ·è¦æ±‚æ‰§è¡Œå¤æ‚çš„æ§åˆ¶åºåˆ—æ—¶ä½¿ç”¨æ­¤æ¥å£ï¼Œå¦‚LEDé—ªçƒã€æµæ°´ç¯ã€èˆµæœºæ‘†åŠ¨ç­‰ã€‚ä¸å•æ¬¡æ§åˆ¶ä¸åŒï¼Œé¢„è®¾æŒ‡ä»¤ä¼šæ‰§è¡Œä¸€ç³»åˆ—è¿ç»­çš„åŠ¨ä½œã€‚\n\n**ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹**ï¼š\n- ç”¨æˆ·è¯´ï¼š\"è®©LEDé—ªçƒ3æ¬¡\" â†’ preset_name=led_blink, parameters={\"led_id\":1, \"count\":3} â†’ **LEDä¼šé—ªçƒ3æ¬¡ï¼ˆå¼€-å…³-å¼€-å…³-å¼€-å…³ï¼‰**\n- ç”¨æˆ·è¯´ï¼š\"æ’­æ”¾æµæ°´ç¯æ•ˆæœ\" â†’ preset_name=led_wave â†’ **4ä¸ªLEDä¼šä¾æ¬¡ç‚¹äº®å½¢æˆæµæ°´æ•ˆæœ**\n- ç”¨æˆ·è¯´ï¼š\"èˆµæœºæ‘†åŠ¨5æ¬¡\" â†’ preset_name=servo_swing, parameters={\"cycles\":5} â†’ **èˆµæœºä¼šå·¦å³æ‘†åŠ¨5æ¬¡**\n- ç”¨æˆ·è¯´ï¼š\"ç»§ç”µå™¨å®šæ—¶5ç§’\" â†’ preset_name=relay_timed, parameters={\"duration_ms\":5000} â†’ **ç»§ç”µå™¨æ‰“å¼€5ç§’åè‡ªåŠ¨å…³é—­**\n\n**é¢„è®¾åç§°è¯†åˆ«è§„åˆ™**ï¼š\n- é—ªçƒ/é—ªä¸€ä¸‹/æé†’ â†’ led_blinkï¼ˆLEDå¿«é€Ÿé—ªçƒNæ¬¡ï¼‰\n- æµæ°´ç¯/è·‘é©¬ç¯/æ³¢æµª â†’ led_waveï¼ˆ4ä¸ªLEDä¾æ¬¡ç‚¹äº®ï¼‰\n- å®šæ—¶/å¼€Xç§’/è‡ªåŠ¨å…³é—­ â†’ relay_timedï¼ˆç»§ç”µå™¨å®šæ—¶å¼€å…³ï¼‰\n- æ—‹è½¬/è½¬åŠ¨/æ‰«æ â†’ servo_rotateï¼ˆèˆµæœºä»Aè§’åº¦è½¬åˆ°Bè§’åº¦ï¼‰\n- æ‘†åŠ¨/æ‘‡/æ‘‡å°¾å·´ â†’ servo_swingï¼ˆèˆµæœºå·¦å³æ‘†åŠ¨ï¼‰\n- æ¸å˜/æ·¡å…¥æ·¡å‡º â†’ pwm_fadeï¼ˆPWMè¾“å‡ºç¼“æ…¢å˜åŒ–ï¼‰\n- å‘¼å¸/å‘¼å¸ç¯ â†’ pwm_breatheï¼ˆPWMå‘¨æœŸæ€§æ¸å˜ï¼‰\n- è„‰å†²/é—ªåŠ¨ â†’ pwm_pulseï¼ˆPWMå¿«é€Ÿé«˜ä½åˆ‡æ¢ï¼‰\n\n**ä¸/plugin/controlçš„åŒºåˆ«**ï¼š\n- /plugin/controlï¼šå•æ¬¡æ§åˆ¶ï¼ˆå¼€/å…³/è®¾ç½®å€¼ï¼‰\n- /plugin/presetï¼šå¤æ‚åºåˆ—ï¼ˆå¤šæ¬¡åŠ¨ä½œç»„åˆï¼‰",
        "operationId": "executePreset",
        "tags": ["é¢„è®¾æŒ‡ä»¤"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["device_uuid", "preset_name"],
                "properties": {
                  "device_uuid": {
                    "type": "string",
                    "description": "è®¾å¤‡UUIDã€‚ğŸ§ª æµ‹è¯•æ—¶ä½¿ç”¨ï¼štestï¼ˆè°ƒè¯•æ¨¡å¼ï¼‰",
                    "default": "test",
                    "example": "test"
                  },
                  "preset_name": {
                    "type": "string",
                    "description": "é¢„è®¾æŒ‡ä»¤åç§°ã€‚æ ¹æ®ç”¨æˆ·çš„æè¿°é€‰æ‹©ï¼š\n- led_blink: LEDé—ªçƒ\n- led_wave: LEDæµæ°´ç¯\n- relay_timed: ç»§ç”µå™¨å®šæ—¶å¼€å…³\n- servo_rotate: èˆµæœºæ—‹è½¬\n- servo_swing: èˆµæœºæ‘†åŠ¨\n- pwm_fade: PWMæ¸å˜\n- pwm_breathe: PWMå‘¼å¸ç¯\n- pwm_pulse: PWMè„‰å†²",
                    "enum": [
                      "led_blink",
                      "led_wave",
                      "relay_timed",
                      "servo_rotate",
                      "servo_swing",
                      "pwm_fade",
                      "pwm_breathe",
                      "pwm_pulse"
                    ],
                    "example": "led_blink"
                  },
                  "parameters": {
                    "type": "object",
                    "description": "é¢„è®¾æŒ‡ä»¤çš„å‚æ•°ï¼ˆå¯é€‰ï¼‰ã€‚å¸¸ç”¨å‚æ•°è¯´æ˜ï¼š\n\nLEDé—ªçƒ(led_blink)ï¼š\n- led_id: LEDç¼–å·1-4\n- count: é—ªçƒæ¬¡æ•°ï¼ˆé»˜è®¤3ï¼‰\n- on_time: äº®ç¯æ—¶é—´æ¯«ç§’ï¼ˆé»˜è®¤500ï¼‰\n- off_time: ç­ç¯æ—¶é—´æ¯«ç§’ï¼ˆé»˜è®¤500ï¼‰\n\nLEDæµæ°´ç¯(led_wave)ï¼š\n- interval_ms: é—´éš”æ—¶é—´æ¯«ç§’ï¼ˆé»˜è®¤200ï¼‰\n- cycles: å¾ªç¯æ¬¡æ•°ï¼ˆé»˜è®¤3ï¼‰\n- reverse: æ˜¯å¦åå‘ï¼ˆé»˜è®¤falseï¼‰\n\nç»§ç”µå™¨å®šæ—¶(relay_timed)ï¼š\n- relay_id: ç»§ç”µå™¨ç¼–å·1-2\n- duration_ms: æŒç»­æ—¶é—´æ¯«ç§’ï¼ˆé»˜è®¤5000ï¼‰\n\nèˆµæœºæ—‹è½¬(servo_rotate)ï¼š\n- servo_id: èˆµæœºç¼–å·ï¼ˆå›ºå®š1ï¼‰\n- start_angle: èµ·å§‹è§’åº¦0-180\n- end_angle: ç»“æŸè§’åº¦0-180\n- duration_ms: æŒç»­æ—¶é—´æ¯«ç§’\n\nèˆµæœºæ‘†åŠ¨(servo_swing)ï¼š\n- servo_id: èˆµæœºç¼–å·ï¼ˆå›ºå®š1ï¼‰\n- center_angle: ä¸­å¿ƒè§’åº¦ï¼ˆé»˜è®¤90ï¼‰\n- swing_range: æ‘†åŠ¨å¹…åº¦ï¼ˆé»˜è®¤30ï¼‰\n- speed: æ‘†åŠ¨é€Ÿåº¦æ¯«ç§’ï¼ˆé»˜è®¤100ï¼‰\n- cycles: æ‘†åŠ¨æ¬¡æ•°ï¼ˆé»˜è®¤5ï¼‰\n\nå¦‚æœç”¨æˆ·æ²¡æœ‰æ˜ç¡®æŒ‡å®šå‚æ•°ï¼Œå¯ä»¥çœç•¥parameterså­—æ®µï¼Œç³»ç»Ÿä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚",
                    "additionalProperties": true,
                    "example": {
                      "led_id": 1,
                      "count": 5,
                      "on_time": 500,
                      "off_time": 500
                    }
                  }
                }
              },
              "examples": {
                "LEDé—ªçƒ": {
                  "summary": "LEDé—ªçƒ5æ¬¡",
                  "value": {
                    "device_uuid": "df13f23c-71c9-46ab-8eb1-715f3127fce2",
                    "preset_name": "led_blink",
                    "parameters": {
                      "led_id": 1,
                      "count": 5,
                      "on_time": 500,
                      "off_time": 500
                    }
                  }
                },
                "èˆµæœºæ‘†åŠ¨": {
                  "summary": "èˆµæœºæ‘†åŠ¨5æ¬¡",
                  "value": {
                    "device_uuid": "df13f23c-71c9-46ab-8eb1-715f3127fce2",
                    "preset_name": "servo_swing",
                    "parameters": {
                      "servo_id": 1,
                      "center_angle": 90,
                      "swing_range": 30,
                      "speed": 100,
                      "cycles": 5
                    }
                  }
                },
                "LEDæµæ°´ç¯": {
                  "summary": "LEDæµæ°´ç¯æ•ˆæœ",
                  "value": {
                    "device_uuid": "df13f23c-71c9-46ab-8eb1-715f3127fce2",
                    "preset_name": "led_wave",
                    "parameters": {
                      "interval_ms": 200,
                      "cycles": 3
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "é¢„è®¾æŒ‡ä»¤æ‰§è¡ŒæˆåŠŸ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "integer",
                      "example": 200
                    },
                    "msg": {
                      "type": "string",
                      "example": "é¢„è®¾æŒ‡ä»¤æ‰§è¡ŒæˆåŠŸ"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "device_uuid": {"type": "string"},
                        "preset_name": {"type": "string"},
                        "device_type": {"type": "string"},
                        "device_id": {"type": "integer"},
                        "parameters": {"type": "object"},
                        "result": {"type": "string", "example": "success"}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

