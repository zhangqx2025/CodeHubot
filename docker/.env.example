# ==========================================
# CodeHubot 生产环境配置示例
# 复制此文件为 .env 并修改相应配置
# ==========================================

# ==================== 数据库配置 ====================
MYSQL_DATABASE=aiot_admin
MYSQL_USER=aiot_user
MYSQL_PASSWORD=aiot_password
MYSQL_ROOT_PASSWORD=root_password
MYSQL_PORT=3306

# ==================== Redis配置 ====================
REDIS_PORT=6379

# ==================== MQTT配置 ====================
MQTT_PORT=1883
MQTT_WS_PORT=9001
MQTT_USERNAME=
MQTT_PASSWORD=

# ==================== 服务端口配置 ====================
BACKEND_PORT=8000
CONFIG_SERVICE_PORT=8001
FRONTEND_PORT=8080
PHPMYADMIN_PORT=8081
FLOWER_PORT=5555

# ==================== 服务器配置 ====================
SERVER_BASE_URL=http://localhost:8000
BACKEND_URL=http://backend:8000

# ==================== JWT配置 ====================
# 生成方法：python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=qq_ncy9tw3YeRhoAKWHiiaqmgc4fF3uxOLr-X9eugZE
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_MINUTES=45

# ==================== 内部API密钥 ====================
# 生成方法：python -c "import secrets; print(secrets.token_urlsafe(32))"
INTERNAL_API_KEY=JXCAOxbD9qyRDdrxVvfVB5dVwT3uOI0ZiQHUnKGtBQw

# ==================== 阿里云服务配置 ====================
# 通义千问 API 密钥（用于知识库文档向量化）
# 获取方式：
#   1. 访问 https://dashscope.console.aliyun.com/
#   2. 登录阿里云账号，开通 DashScope 服务
#   3. 在 API-KEY 管理页面创建密钥
#   4. 复制密钥到下方（格式：sk-xxxxxxxxxxxxxxxxxxxxxxxx）
# 文档：https://help.aliyun.com/zh/dashscope/developer-reference/activate-dashscope-and-create-an-api-key
DASHSCOPE_API_KEY=sk-your-dashscope-api-key-here

# ==================== 环境配置 ====================
ENVIRONMENT=production
LOG_LEVEL=INFO

# ==================== 插件服务配置 ====================
PLUGIN_SERVICE_PORT=9000
PLUGIN_CORS_ENABLED=true
PLUGIN_CORS_ORIGINS=*
PLUGIN_REQUEST_TIMEOUT=30
PLUGIN_DEBUG_MODE=false

# ==================== 构建加速配置（可选）====================
# 如果构建镜像时网络较慢，可以启用国内镜像源加速
# 设置为 true 使用清华大学镜像源，或使用自定义镜像源
USE_CHINA_MIRROR=true
# PIP_INDEX_URL=https://pypi.tuna.tsinghua.edu.cn/simple
# PIP_TRUSTED_HOST=pypi.tuna.tsinghua.edu.cn

# ==========================================
# 🚀 快速启动指南
# ==========================================
# 1. 复制此文件：cp .env.example .env
# 2. 修改必需配置：
#    - SECRET_KEY（生产环境必须修改！）
#    - INTERNAL_API_KEY（生产环境必须修改！）
#    - MYSQL_PASSWORD 和 MYSQL_ROOT_PASSWORD（建议修改）
#    - DASHSCOPE_API_KEY（如需使用知识库向量化功能）
#    - ADMIN_PASSWORD（首次部署建议设置，自动创建管理员账号）
#    - QWEN_API_KEY（首次部署建议设置，自动创建默认大模型）
# 3. 启动服务：docker-compose -f docker-compose.prod.yml up -d
# 4. 查看状态：docker-compose -f docker-compose.prod.yml ps
# 5. 查看日志：docker-compose -f docker-compose.prod.yml logs -f
#
# 服务访问地址：
#   - 前端：http://localhost:80
#   - 后端API：http://localhost:8000
#   - API文档：http://localhost:8000/docs
#   - phpMyAdmin：http://localhost:8081
#   - Celery监控：http://localhost:5555
#
# 详细文档：./环境变量配置说明.md
# ==========================================

# ==================== 管理员账号配置（首次部署推荐）====================
# 系统启动时会自动创建管理员账号（如果设置了 ADMIN_PASSWORD）
# 如果账号已存在，则不会重复创建

# 管理员用户名（默认：admin）
ADMIN_USERNAME=admin

# 管理员密码（必须设置才会创建管理员账号）
# 建议使用强密码，至少8位，包含字母和数字
ADMIN_PASSWORD=

# 管理员邮箱（可选，默认：{ADMIN_USERNAME}@aiot.com）
# ADMIN_EMAIL=admin@example.com

# ==================== 默认大模型配置（首次部署推荐）====================
# 系统启动时会自动创建默认的通义千问大模型配置
# 如果未配置，智能体将无法使用（除非手动创建大模型配置）

# 通义千问API密钥
# QWEN_API_KEY=sk-your-qwen-api-key-here

# 通义千问API地址（默认：https://dashscope.aliyuncs.com/compatible-mode/v1）
# QWEN_API_BASE=https://dashscope.aliyuncs.com/compatible-mode/v1

# 模型名称（默认：qwen-turbo）
# QWEN_MODEL_NAME=qwen-turbo

# 显示名称（默认：通义千问-Turbo）
# QWEN_DISPLAY_NAME=通义千问-Turbo

# 最大token数（默认：8192）
# QWEN_MAX_TOKENS=8192

# 温度参数（默认：0.20）
# QWEN_TEMPERATURE=0.20

# Top-p参数（默认：0.90）
# QWEN_TOP_P=0.90

# ==================== 默认产品配置（首次部署推荐）====================
# 系统启动时会自动创建默认的产品配置（ESP32-S3开发板）
# 如果未配置，将使用默认值

# 产品编码（默认：ESP-32-S3-01）
# DEFAULT_PRODUCT_CODE=ESP-32-S3-01

# 产品名称（默认：标准开发板）
# DEFAULT_PRODUCT_NAME=标准开发板
